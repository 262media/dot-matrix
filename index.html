<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Dot MatrixðŸ”¥</title>
        <style>
            html,
            body {
                height: 100%;
                margin: 0;
                padding: 0;
            }

            div {
                position: relative;
                text-align: center;
                margin-top: 50px;
            }

            svg {
                display: inline-block !important;
                position: relative;
            }

            .controls {
                position: absolute;
                top: 0;
                right: 0;
                padding: 10px;
                z-index: 9999;
            }

            input {
                display: block;
            }
        </style>
    </head>
    <body>
        <div class="controls">
            <input type="text" name="spacing" placeholder="spacing" value=""/>
            <input type="text" name="padding" placeholder="padding" value=""/>
            <input type="text" name="rows" placeholder="rows" value=""/>
            <input type="text" name="columns" placeholder="columns" value=""/>
            <input type="text" name="backgroundColor" placeholder="backgroundColor" value=""/>
            <input type="text" name="dotRadius" placeholder="dotRadius" value=""/>
            <input type="text" name="dotFillColor" placeholder="dotFillColor" value=""/>
            <button class="update-options">Update</button>
        </div>
        <div>
            <svg class="dot-matrix" width="100%" height="100%"></svg>
        </div>
        <script src="coordinate-translator.js"></script>
        <script src="smart-dot.js"></script>
        <script src="dot-matrix.js"></script>
        <script>
           const matrix = new DotMatrix(
                document.querySelector('.dot-matrix'),
                {
                    padding: 20,
                    spacing: 20,
                    rows: 50,
                    columns: 50,
                    svgBackgroundColor: 'black',
                    dotConfig: {
                        DISTANCE_TO_FEAR: 50,
                        DISTANCE_TO_STEP: 10,
                        DELAY_BEFORE_GOING_HOME: 500,
                        DOT_RADIUS: 5,
                        DOT_FILL_COLOR: 'random',
                        CSS_CLASS_GOING_HOME: 'animate_going_home',
                    },
                    transitions: {
                        timing: {
                            fromHome: '0.1s',
                            backHome: '1s',
                        },
                        duration: {
                            fromHome: 'ease',
                            backHome: 'ease',
                        },
                    },
                }
            );

            document.querySelector('.update-options').addEventListener('click', (e) => {
                e.preventDefault();
                delete matrix;
                const spacing = document.querySelector('input[name="spacing"]').value || 20;
                const padding = document.querySelector('input[name="padding"]').value || 20;
                const columns = document.querySelector('input[name="columns"]').value || 50;
                const rows = document.querySelector('input[name="rows"]').value || 50;
                const backgroundColor = document.querySelector('input[name="backgroundColor"]').value || 'black';
                const dotRadius = document.querySelector('input[name="dotRadius"]').value || 5;
                const dotFillColor = document.querySelector('input[name="dotFillColor"]').value || 'random';

                const svg = document.querySelector('.dot-matrix');
                svg.innerHTML = '';

                new DotMatrix(
                    svg,
                    {
                        padding,
                        spacing,
                        rows,
                        columns,
                        svgBackgroundColor: backgroundColor,
                        dotConfig: {
                            DOT_RADIUS: dotRadius,
                            DOT_FILL_COLOR: dotFillColor,
                            DISTANCE_TO_FEAR: 50,
                            DISTANCE_TO_STEP: 10,
                            DELAY_BEFORE_GOING_HOME: 500,
                            CSS_CLASS_GOING_HOME: 'animate_going_home',
                        },
                    }
                )
            });
        </script>
    </body>
</html>